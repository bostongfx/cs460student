<html>
  <head>

      <style>
        body {
            background-color: black;
        }
      </style>

      <script type="text/javascript" src="https://get.goXTK.com/xtk_edge.js"></script>
      <script type="text/javascript" src="loader.js"></script>

      <script>

        var SELECTED_SPHERE = null;
        var camSpin = false;
        var camCycl = null;
        var camPos = 0;
        var cameras = []
          window.onload = function() {


              r = new X.renderer3D();
              r.init();


            var SIZE = 5
            var GAP = 25
             for (var z=-5; z < 6; z++) {
                 for (var y=-5; y < 6; y++) {
                     for(var x=-5; x < 6; x++) {
                        s = new X.sphere();
                        s.radius = Math.random() * 10;
                        s.transform.translateX((SIZE + GAP) * x);
                        s.transform.translateY((SIZE + GAP) * y);
                        s.transform.translateZ((SIZE + GAP) * z);
                        r.add(s);
                     }
                 }
             }
            
            r.camera.position = [0,0,300]
            r.render();
             // console.log('Hello CS460!')
            r.interactor.onMouseMove = function(event) {
                sphereid = r.pick(event.offsetX, event.offsetY) ;
                if (sphereid != 0) {
                    SELECTED_SPHERE = r.get(sphereid);
                }

            }
        }

        window.onkeypress = function(e) {
            if (e.key == 'q') {
                SELECTED_SPHERE.visible = false;
            }
            if (e.key == 'w') {
                SELECTED_SPHERE.color = [Math.random(), Math.random(), Math.random()];
            }
            if (e.key == 'e') {
                SELECTED_SPHERE.transform.rotateX(10);
            }

            if (e.key == 'b') {
                camSpin = !camSpin
                    r.onRender = function() {
                        if (camSpin) {
                            // spin the camera in X direction by 1 degree
                            r.camera.rotate([1, 0]);
                        }
                    }
            }
            if (e.key == 'o') {
                download();
            }
            if (e.key == 'l') {
                upload("scene.json")
            }
            if (e.key == 'c') {
                cameras.push(new Float32Array(r.camera.view));
            }
            function moveCamera () {
                r.camera.view = cameras[camPos];
                camPos++
                if (camPos >= cameras.length) {
                    camPos = 0;
                }
            }
            if (e.key == 'v') {

                if(camCycl == null){
                    camCycl = setInterval(moveCamera, 1000)
                } else {
                    clearInterval(camCycl);
                    camCycl = null;
                }
            }
        }



      </script>

  </head>
  <body>
  </body>
</html>


